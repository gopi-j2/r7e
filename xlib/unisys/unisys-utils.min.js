var uUtils={dispatchEvent:function(t,n){if(t&&n){var e=document.createEvent("Event");e.initEvent(t,!0,!0),n.each(function(){this.dispatchEvent(e)})}},settings:{toastTimeout:8e3}};$(document).on("click","input.toggle ~ .input-group-append .input-group-text",function(){var t=$(this),n=t.closest(".input-group").find("input.toggle"),e=0<n.filter(":password").length?"text":"password";n.attr("type",e);var o="";window.i18next?(o="text"==e?"password.hide":"password.show",t.attr("data-tr","[data-original-title]"+o),t.localize()):(o="text"==e?"Hide Password":"Show Password",t.attr("data-original-title",o)),t.tooltip("hide").tooltip("show")}),uUtils.toaster=function(t,n,e,o){var a="number"==typeof e?o:e,i="number"==typeof e?e:null;$.toaster({message:t,type:n,delay:i,size:a})},$.toaster=function(t){"use strict";var e,o,n=(t.type||"success").toLowerCase(),a="ts"+Date.now(),i=t.id||"",s=t.message||t.msg,l=1e3*(t.delay||8),d="",c=$(".toaster").length,r="",u="",m=(t.size||"").toLowerCase(),f=0!=t.autohide,p="timer"==n?"time":n+"-s",v=t.buttons||{};$.each(t.buttons,function(t,n){e=n.buttonClass||"btn-default",o=n.label||"",d+='<button type="button" class="btn btn-link toaster-btn '+e+'" data-button-action="'+t+'">'+o+"</button>"}),"timer"==n&&(u='<div class="timer '+m+'" id="timer_'+a+'"></div>'),!t.buttons&&"timer"!=n||(r='<div class="toast-footer">'+u+'<div class="toast-action">'+d+"</div></div>");var h=['<div class="toast '+m+'" data-'+n+' role="alert" id="'+i+'"  data-toast-id="'+a+'" data-animation="true"><div class="toast-body"><div><i class="icon '+p+" "+m+'"></i></div><div>'+s+"</div></div>"+r+"</div>"].join("");0===c&&$('<div class="toaster"></div>').appendTo("body"),$(h).appendTo(".toaster");var g=$('[data-toast-id="'+a+'"]');g.toast({delay:l,autohide:f}).toast("show"),g.find(".toaster-btn").on("click",function(){var t=$(this),n=t.data("buttonAction"),e=t.closest(".toast").attr("data-toast-id");v[n].action(i),$('[data-toast-id="'+e+'"]').toast("hide")}),"timer"==n&&uUtils.timer("#timer_"+a,l/1e3,function(){t.hasOwnProperty("onTimerComplete")&&t.onTimerComplete(i)})},uUtils.searchInput=function(t,l){var n=$(t);n.find(".search-input").each(function(){0<$(this).siblings(".search-close").length||$('<a href="javascript:;" class="search-close" title="Clear Search"><i class="icon clear"></i></a>').insertAfter(this),window.i18next&&$(this).siblings(".search-close").attr("data-tr","[title]clearSearch")}),window.i18next&&n.localize(),n.on("input",".search-input",function(){var t=$(this),n=t.val().length,e=0==n,o=e?"removeClass":"addClass",a=t.is("[data-min-length]")?t.data("minLength")>n:e,i=t.is("[data-auto-complete]"),s=t.nextAll(".dropdown-menu");t[o]("has-val"),t.nextAll(".btn").prop("disabled",a),l&&l.prop("disabled",a),i&&!e?s.addClass("show"):s.removeClass("show")}),n.on("click",".search-close",function(){var t=$(this).siblings(".search-input");t.val("").focus(),uUtils.dispatchEvent("input",t)}),n.on("click",".search-input[data-auto-complete] ~ .dropdown-menu .dropdown-item",function(){var t=$(this),n=t.closest(".dropdown-menu");n.prevAll(".search-input[data-auto-complete]").val(t.text()),n.removeClass("show")})},$(document).on("input",".custom-file-input",function(t){var n=$(this).closest(".custom-file").find(".custom-file-label");t.target.files.length&&n.html(t.target.files[0].name),n.addClass("file-input-selected")}),uUtils.spinner=function(t){var n=$("body");n.addClass("loading"),setTimeout(function(){n.removeClass("loading")},5e3)},$.snackbar=function(t){"use strict";$(".snackbar").remove();var e,o,n=(t.type||"inline").toLowerCase(),a="ts"+Date.now(),i=t.message||t.msg,s=t.transition||"fade",l="",d=$(".snackbar-wrap").length,c=t.buttons||{};$.each(t.buttons,function(t,n){e=n.buttonClass||"btn-default",o=n.label||"",l+='<button type="button" class="snackbar-btn '+e+'" data-button-action="'+t+'">'+o+"</button>"});var r=['<div class="snackbar ',n," ",s,'" id="',a,'"><div class="snackbar-body">',i,'</div><div class="snackbar-buttons">',l,"</div></div>"].join("");0===d&&$('<div class="snackbar-wrap"></div>').appendTo("body"),$(r).appendTo(".snackbar-wrap"),setTimeout(function(){$("#"+a).addClass("open")},10),$(".snackbar-btn").off("click").on("click",function(){var t=$(this),n=t.data("buttonAction"),e=t.closest(".snackbar");c[n].action(),e.removeClass("open"),setTimeout(function(){e.remove()},600)})},uUtils.menuToggle=function(t){var o=$(t);function a(){var t=o.filter(".accordion").find("ul.nav > li.nav-item > a.active");if(0<t.length){var n=t.closest("li"),e=o.find(".sub-menu-preview");n.has("ul").length?e.addClass("d-none"):(e.find(".page-name").text(n.find(".text").text()),e.removeClass("d-none"))}}sessionStorage.getItem("pinned")&&o.addClass("min"),a(),$(document).click(function(){$(".sidemenu").removeClass("open")}),o.on("click",".menu-pin",function(){$(this).closest(".sidemenu").toggleClass("min")}),o.on("click",".menu:not(.min)",function(t){t.stopPropagation(),$(this).closest(".sidemenu").toggleClass("open")}),o.on("click",".form-control.search-input",function(t){t.stopPropagation()}),o.filter(".sidemenu.accordion").on("click",".nav.flex-column .nav-item .nav-link",function(t){var n=$(this),e=n.closest("li.nav-item");e.has("ul").length&&(t.stopPropagation(),n.toggleClass("open"),e.siblings().find("a.nav-link").removeClass("open"),n.closest(".sidemenu.accordion").addClass("open")),e.siblings().find("a.nav-link").removeClass("active"),n.addClass("active"),a()}),o.on("input",".search-input",function(){var n=$(this).val().toLowerCase();o.find("ul.nav > li > .open.active + ul li").each(function(){var t=$(this);-1<t.text().toLowerCase().indexOf(n)?(t.show(),t.filter(".dropdown").find("> .nav-link").addClass("open active")):t.hide()})})},uUtils.numberInput=function(t){var n=$(t);$('[data-toggle="tooltip"]').tooltip();return n.off("keypress").on("keypress",".number-input .form-control",function(t){return/[0-9]/.test(t.key)}),n.off("input").on("input",".number-input .form-control",function(t){var n=$(this),e=n.closest(".number-input"),o=+n.val(),a=n.is("[data-number-range]"),i=0==n.val().length;if(a){var s=n.data("numberRange").split(":"),l=+s[0],d=+s[1];o<l?o=l:d<o&&(o=d),e.find(".btn.minus").prop("disabled",o<=l),e.find(".btn.plus").prop("disabled",d<=o)}o=i?"":o,n.val(o)}),n.off("click").on("click",".number-input .btn",function(){var t=$(this),n=t.closest(".number-input").find(".form-control"),e=t.hasClass("minus"),o=n.is("[data-number-step]")?n.data("numberStep"):1,a=+n.val(),i=e?a-o:a+o,s=n.is("[data-number-range]"),l=0==n.val().length;if(s){var d=+n.data("numberRange").split(":")[0];i=l?d:i}n.val(i),uUtils.dispatchEvent("input",n)}),{getVal:function(){return n.find(".form-control").val()}}},$.confirm=function(t){"use strict";$(".confirm.modal").remove();var e,o,a,n=(t.type||t.confirmType).toLowerCase(),i=t.class||t.confirmClass||"",s=t.id||"confirmDlg_"+Date.now(),l=t.message||t.msg||t.m,d=t.description||t.desc||"",c=t.buttonstatus||t.buttonStatus||"show",r="",u=t.buttons||{};$.each(t.buttons,function(t,n){e=n.id||"DlgBtn_"+t.replace(/[^a-zA-Z0-9]/g,""),o=n.label||t,a=n.buttonClass||"","",r+='<button type="button" class="btn '+a+'" id="'+e+'"  data-button-action="'+t+'">'+o+"</button>"});var m=['<div class="modal fade confirm ',i,'" id="',s,'" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">','<div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content">','<div class="modal-body"><p class="modal-icon"><i class="icon ',n,'-s"></i></p><p class="modal-message">',l,'</p><p class="modal-description">',d,"</p></div>",'<div class="modal-footer ',c,'">',r,"</div></div></div></div>"].join("");$(m).appendTo("body"),setTimeout(function(){$("#"+s).modal("show")},10),$(".confirm.modal .btn").off("click").on("click",function(){var t=$(this),n=t.data("buttonAction"),e=t.closest(".confirm.modal");u[n].action(),e.modal("hide"),setTimeout(function(){e.remove()},600)})},uUtils.contextualComment=function(t,h){var n=$(t),e=n.find(".comment");if(e.length||(e=n.filter(".comment")).length||(e=n).length){var g={maxWidth:650,maxHeight:400,minWidth:400,minHeight:300,ellipsisLimit:100,maxChars:1e3,resizable:!0,draggable:!0,required:!1};e.each(function(){var t,n,e,o,a,i=$(this),s=i.data(),l=i.text(),d="",c="",r=!1,u=0,m="",f="";s=$.extend({},g,s,h),t=Boolean(s.resizable),n=Boolean(s.draggable),e=Boolean(s.required),a=s.title||"Comments",m=s.addLinkText||"Add Comment",f=s.editLinkText||"Edit Comment",u=s.ellipsisLimit,v(l),o='<span class="pre-ellipsis">'+d+'</span><span class="ellipsis">...</span> <a href="javascript:;" class="text-underline open-link">'+c+"</a>";var p='<div class="contextual-comment '+(t?"resizable":"")+'" data-draggable="'+n+'"><div class="contextual-comment-header"><h3 class="title">'+a+'<i class="icon close" data-close=""></i></h3></div><div class="contextual-comment-body"><form class="form-outline h-100"><div class="form-row h-100"><div class="col-sm-12 form-group"><textarea class="form-control" data-tr="[placeholder]enter_comments" placeholder="Enter Comments" spellcheck="false" rows="2">'+l+'</textarea><small class="form-text text-muted float-right"><span id="countRemaining"></span><span data-tr="chars_remaining"> chars remaining</span></small><div class="error-txt text-left" data-tr="field_cannot_be_empty">Field cannot be empty</div></div></div></form></div><div class="contextual-comment-footer"><button type="button" class="btn btn-secondary btn-md" data-close="" data-tr="btn_cancel">Cancel</button><button type="button" class="btn btn-primary btn-md" id="btnUpdate" data-tr="btn_update">Update</button></div></div>';function v(t){0==t.length?(c=m,d=""):t.length>=u?(c=f,d=t.substr(0,u),r=!0):(c=f,d=t)}i.html(o),i.find(".ellipsis")[r?"show":"hide"](),i.find(".open-link").after(p),window.i18next&&i.localize(),b(i,s),i.find("[data-close]").on("click",function(){i.find(".contextual-comment").hide()}),i.find("textarea").on("input",function(){0<$(this).val().length&&(i.find(".form-group").removeClass("has-error-msg"),i.find("#btnUpdate").removeClass("disabled")),b(i,s)}),i.find("#btnUpdate").off("click").on("click",function(){var t=i.find("textarea").val().trim();if(r=!1,e&&0==t.length)return i.find(".form-group").addClass("has-error-msg"),!1;v(t),i.find(".pre-ellipsis").text(d),i.find(".open-link").text(c),i.find(".ellipsis")[r?"show":"hide"](),i.find(".contextual-comment").hide(),s.onUpdate&&s.onUpdate(t)}),i.find(".open-link").on("click",function(){i.find(".contextual-comment").show(),function(t){var n=t.val();t.val("").focus().val(n)}(i.find("textarea")),function(t,n){t.css({maxHeight:n.maxHeight,maxWidth:n.maxWidth,minHeight:n.minHeight,minWidth:n.minWidth,width:"inherit",height:"inherit",top:"inherit",left:"inherit"})}(i.find(".contextual-comment"),s)}),n&&i.off("mousedown").on("mousedown",".contextual-comment-header",function(t){var s=$(this).closest(".contextual-comment"),l=0,d=0,c=0,r=0;t.preventDefault(),c=t.clientX,r=t.clientY,$(document).off("mousemove").on("mousemove",function(t){var n,e,o=$("body"),a=o.outerWidth(),i=o.outerHeight();t.preventDefault(),l=c-t.clientX,d=r-t.clientY,c=t.clientX,r=t.clientY,e=s.offset().top-d,n=s.offset().left-l,0<=e&&e+s.outerHeight()<=i&&s.css("top",e+"px"),0<=n&&n+s.outerWidth()<=a&&s.css("left",n+"px"),s.addClass("dragging")}),$(document).off("mouseup").on("mouseup",function(){$(document).off("mousemove"),$(document).off("mouseup"),s.removeClass("dragging")})})})}function b(t,n){var e=t.find("textarea").val().length,o=n.maxChars-e;t.find("#countRemaining").text(o),t.find("#countRemaining")[o<0?"addClass":"removeClass"]("error"),t.find("#btnUpdate").prop("disabled",o<0)}},uUtils.timer=function(t,n,o){var e=document.querySelectorAll(t+":not(.icon");function a(n,e){var t=new Date(1e3*e).toISOString().substr(11,8);n.querySelector(".time").innerHTML=t,setTimeout(function(){var t=e-1;0<=t?uUtils.timer.startTimer(n,t):o()},1e3)}e.forEach(function(t){t.innerHTML='<div class="clock"><div class="fill l"></div><div class="fill r"></div></div><div class="time">HH:MM:SS</div>',t.classList.add("start"),t.style="--timer:"+n+"s",a(t,n)}),uUtils.timer.startTimer=a},$(document).on("click",'[data-toggle="overlay"]',function(){$(this).closest(".modal.overlay").toggleClass("open")}),$(".modal.overlay").on("hide.bs.modal",function(){$(this).removeClass("open")}),uUtils.scrollCount=function(){function o(t){var n=$(t),e=n.height(),o=n.offset().top+e,a=n.data("scrollCount"),i=n.find(a),s=i.length,l=n.next(".scroll-count-output");i.each(function(t,n){var e=$(n);e.offset().top<o&&e.addClass("viewed")});var d=s-n.find(".viewed").length;0==d&&l.fadeOut(),l.html(d)}$("[data-scroll-count]").each(function(t,n){var e=$(n);0==e.next(".scroll-count-output").length&&$('<div class="scroll-count-output">0</div>').insertAfter(e),e.parent().addClass("scroll-count"),o(n),e.off().on("scroll",function(){o(this)})})},$(document).on("change",".dropdown .pills ~ .dropdown-menu .form-check-input",function(){var t=$(this).closest(".dropdown"),n=t.find(".form-check-input:checked");t.find(".selected-count").text(n.length)}),$(document).on("click",".dropdown .pills ~ .dropdown-menu .form-check",function(t){t.stopPropagation()}),$(document).on("click","[data-auto-suggest-pills] .btn.btn-link",function(){var t=$(this),o=t.closest("[data-auto-suggest-pills]");t.toggleClass("d-none"),o.find(".dropdown").toggleClass("d-none"),o.find(".form-control").focus(),o.find(".dropdown-menu").off("click").on("click",".dropdown-item",function(){var t=$(this),n=o.find(".selected-pills");0==n.length&&(o.append('<div class="selected-pills"></div>'),n=o.find(".selected-pills"));var e=t[0].classList.value.replace("dropdown-item","").replace("inactive","").split(" ");e.push("pills"),n.append('<span class="'+e.join(" ")+' " data-index="'+t.index()+'">'+t.text()+' <a href="javascript:;"><i class="icon sm clear"></i></a></span>'),t.toggleClass("d-none inactive")})}),$(document).on("click","[data-auto-suggest-pills] .selected-pills .pills a",function(){var t=$(this).parent(),n=t.closest("[data-auto-suggest-pills]"),e=t.attr("data-index");n.find(".dropdown-menu .dropdown-item").eq(e).toggleClass("d-none"),t.remove()}),$(document).on("click","[data-auto-suggest-pills] .search-close",function(){var t=$(this),n=t.closest("[data-auto-suggest-pills]");t.closest(".dropdown").toggleClass("d-none"),n.find(".btn-link").toggleClass("d-none")}),$(document).on("input","[data-auto-suggest-pills] .form-control",function(){var t=$(this),n=t.closest("[data-auto-suggest-pills]"),e=$(this).val().toLowerCase();t.dropdown("show"),n.find(".dropdown-menu .dropdown-item").each(function(){var t=$(this),n=t.text().toLowerCase();t[0<=n.indexOf(e)?"removeClass":"addClass"]("d-none")}),n.find(".dropdown-menu .dropdown-item.inactive").addClass("d-none")}),$(document).on("input","[data-count-remaining]",function(){var t=$(this),n=t.data("countRemaining"),e=t.val().length;t.siblings(".form-text").find(".count-remaining").html(n-e)});